<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  
	<configSections>
		<section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net" />
    <section name="serverBackup" type="ServerBackupTool.Models.Configuration.SBTSection, Server Backup Tool" />
	</configSections>

  <serverBackup>
    <serverDetails game="Minecraft" location="D:\1.12.2 Server" startFile="start.bat" />
    <timerDetails count="4" timeZone="(UTC+00:00) Dublin, Edinburgh, Lisbon, London" backupTime="02:00:00" >
      <timers>
        <timer name="Warning One" time="01:00:00" message="Server will shutdown for a backup in an hour." />
        <timer name="Warning Two" time="01:30:00" message="Server will shutdown for a backup in 30 minutes." />
        <timer name="Warning Three" time="01:55:00" message="Server will shutdown for a backup in 5 minutes." />
      </timers>
    </timerDetails>
    <notifications enabled="false" >
      <provider name="smtp.gmail.com" password="hlvp trmv esnr rbji" />
      <fromAddress email="hunternas2024@gmail.com" name="Hunter NAS" />
      <emails>
        <email trigger="Heartbeat" >
          <addresses>
            <toAddress email="tobyhunter2000@gmail.com" name="Toby" />
          </addresses>
          <subject value="SBT Server Notification (Testing)" />
          <content value="&lt;html&gt;&lt;body&gt;&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;The server has failed to respond to a ping, please confirm if Hunter-Nas is active on Hamachi.&lt;/p&gt;
&lt;p&gt;For any urgent issues, please message Toby on discord.&lt;/p&gt;
&lt;p&gt;Thanks,&lt;/p&gt;
&lt;p&gt;Hunter NAS&lt;/p&gt;
&lt;img src=&quot;cid:footerImage&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;/body&gt;&lt;/html&gt;" />
          <images>
            <image key="footerImage" path="D:\System Folders\Documents\GitHub\Server-Backup-Tool\Server Backup Tool\Content\HI Tech Logo.png" />
          </images>
        </email>
        <email trigger="Open" >
          <addresses>
            <toAddress email="tobyhunter2000@gmail.com" name="Toby" />
          </addresses>
          <subject value="SBT Open Notification (Testing)" />
          <content value="&lt;html&gt;&lt;body&gt;&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;The Server Backup Tool has opened.&lt;/p&gt;
&lt;p&gt;For any urgent issues, please message Toby on discord.&lt;/p&gt;
&lt;p&gt;Thanks,&lt;/p&gt;
&lt;p&gt;Hunter NAS&lt;/p&gt;
&lt;img src=&quot;cid:footerImage&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;/body&gt;&lt;/html&gt;" />
          <images>
            <image key="footerImage" path="D:\System Folders\Documents\GitHub\Server-Backup-Tool\Server Backup Tool\Content\HI Tech Logo.png" />
          </images>
        </email>
        <email trigger="Close" >
          <addresses>
            <toAddress email="tobyhunter2000@gmail.com" name="Toby" />
          </addresses>
          <subject value="SBT Close Notification (Testing)" />
          <content value="&lt;html&gt;&lt;body&gt;&lt;p&gt;Hello,&lt;/p&gt;
&lt;p&gt;The Server Backup Tool has closed.&lt;/p&gt;
&lt;p&gt;For any urgent issues, please message Toby on discord.&lt;/p&gt;
&lt;p&gt;Thanks,&lt;/p&gt;
&lt;p&gt;Hunter NAS&lt;/p&gt;
&lt;img src=&quot;cid:footerImage&quot; width=&quot;200&quot; height=&quot;200&quot;&gt;&lt;/body&gt;&lt;/html&gt;" />
          <images>
            <image key="footerImage" path="D:\System Folders\Documents\GitHub\Server-Backup-Tool\Server Backup Tool\Content\HI Tech Logo.png" />
          </images>
        </email>
      </emails>
    </notifications>
  </serverBackup>
  
	<log4net>
    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%message%newline" />
      </layout>
      <filter type="log4net.Filter.LevelRangeFilter">
        <levelMax value="WARN" />
      </filter>
      <filter type="log4net.Filter.DenyAllFilter" />
    </appender>
		<appender name="BackupLogAppender" type="log4net.Appender.RollingFileAppender">
			<file value="Logs\Server Backup.log" />
			<lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
			<appendToFile value="true" />
			<rollingStyle value="Size" />
			<maxSizeRollBackups value="10" />
			<maximumFileSize value="10MB" />
			<staticLogFileName value="true" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%d{ISO8601} %level - %message%newline" />
			</layout>
		</appender>
    <appender name="ServerLogAppender" type="log4net.Appender.RollingFileAppender">
      <file value="Logs\Server.log" />
      <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
      <appendToFile value="true" />
      <rollingStyle value="Size" />
      <maxSizeRollBackups value="10" />
      <maximumFileSize value="10MB" />
      <staticLogFileName value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%d{ISO8601} %level - %message%newline" />
      </layout>
    </appender>
    <logger name="ToolLogs">
      <appender-ref ref="BackupLogAppender" />
      <appender-ref ref="ConsoleAppender" />
    </logger>
    <logger name="ServerLogs">
      <appender-ref ref="ServerLogAppender" />
    </logger>
	</log4net>
  
</configuration>